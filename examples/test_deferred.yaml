---
format: bender.v1
name: test_deferred
description: >
    A test targeting deferred data reading. Deferred data
    is where a size and offset record are placed in a static
    space which refer to a dynamic block of data someplace else
    in the file.

extensions:
    - test
    - deferred

base: &base
    little_endian: yes
    elide: no
    readonly: no
    format: decimal
    width: 1
    name: Undefined
    matrix:
    signed: no

elements:
    - <<: *base
      name: Magic Number
      width: 8
      format: ascii
      
    - <<: *base
      name: Blob Test
      # width should be the sum of size_width and offset_width in deferred
      width: 8
      deferred: neat_blob
      format: hex
      matrix: 2x1
     
    - <<: *base
      name: Meaning of Life
      width: 4
      format: decimal

matrices:
    - name: 2x1
      columns: 2
      units: 1

deferreds:
    - name: neat_blob
      size_width: 4
      offset_width: 4